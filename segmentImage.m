function [BW,maskedImage] = segmentImage(RGB)
%segmentImage Segment image using auto-generated code from imageSegmenter App
%  [BW,MASKEDIMAGE] = segmentImage(RGB) segments image RGB using
%  auto-generated code from the imageSegmenter App. The final segmentation
%  is returned in BW, and a masked image is returned in MASKEDIMAGE.

% Auto-generated by imageSegmenter app on 16-Jun-2020
%----------------------------------------------------


% Convert RGB image into L*a*b* color space.
X = rgb2lab(RGB);

% Graph Cut
foregroundInd = [25948 25949 26967 26983 27447 27456 27467 27515 27526 27531 27538 27547 28980 28983 29097 29478 29481 29485 29489 29619 30139 31172 32039 32204 33752 34086 35811 36136 37357 37672 39416 40238 40448 41480 41777 43026 44341 44571 46120 47422 48961 49209 50499 51272 53067 53851 55119 56658 56941 58710 60028 61274 63326 63631 66918 69485 70835 71537 75131 79063 79754 82834 84208 86944 89352 90023 92590 95011 96697 99638 99779 102859 105812 105942 109537 111980 112104 115702 118662 119300 123411 125344 128036 129970 130606 131120 131641 131643 131649 131655 131659 132694 134758 136305 137162 138365 138884 140943 141274 143003 146092 146414 149692 150524 153808 155150 157407 157720 161832 162547 163374 165944 167687 168000 170771 172623 175397 175706 180534 180844 183413 185159 185466 188033 189784 190086 191326 192654 192868 194710 195955 196251 197788 199556 200869 201102 202408 204457 205738 205991 209069 210605 211404 213684 215008 216763 218612 218814 221380 222730 223431 224789 225994 226337 228043 229424 229578 230969 231113 232518 232642 232648 234180 235202 235611 235711 237240 237245 237670 237730 237737 237743 237748 238748 239215 239219 239224 239227 239232 239240 239243 239247 239252 239256 ];
backgroundInd = [264 268 276 283 290 295 297 302 305 309 736 741 744 747 829 1753 1754 1757 1759 1864 2230 2233 2236 2237 2239 2241 2243 2246 2247 2249 2252 2255 2256 2261 2262 2264 2267 2384 3255 3760 3764 3766 3767 3936 4971 4978 5299 5500 5503 5507 5512 6321 6324 6826 6830 7853 8086 8356 8358 8359 8361 8362 8604 9894 9897 10407 10668 11947 12218 12973 13251 13485 14510 15020 15318 16032 16036 16041 16045 16540 16865 18413 19106 19958 21156 22684 22686 22694 23046 24224 24230 25622 25760 25761 25762 25764 25768 27300 27684 29352 29866 30257 30890 32430 32942 33345 33969 34482 34996 35507 36948 37558 38583 40636 41582 41659 41660 42172 43197 44225 45765 48845 51871 54491 57570 59078 61651 62166 63711 67312 69372 72973 75546 79146 82746 84288 86859 88401 89430 92001 95087 98686 101257 103827 107426 172190 173731 177326 178866 182461 185542 188624 191191 196326 200948 205570 208175 208651 210193 212248 213786 214348 215327 218923 219492 220463 223095 223544 226625 229269 231248 233899 234328 239044 239464 241003 243163 243570 245223 245621 246255 247804 248327 248701 250239 250918 253012 253317 254581 254590 254592 256135 256651 256652 256654 256657 257688 258205 258208 258213 258448 259758 260789 261308 261312 261315 261323 261332 261524 262884 263060 264435 264597 ];
L = superpixels(X,1109,'IsInputLab',true);

% Convert L*a*b* range to [0 1]
scaledX = X;
scaledX(:,:,1) = X(:,:,1) / 100;
scaledX(:,:,2:3) = (X(:,:,2:3) + 100) / 200;
BW = lazysnapping(scaledX,L,foregroundInd,backgroundInd);

% Create masked image.
maskedImage = RGB;
maskedImage(repmat(~BW,[1 1 3])) = 0;